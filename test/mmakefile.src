include $(TOP)/config/make.cfg

OBJDIR := $(GENDIR)/test
EXEDIR := $(BINDIR)/test

%define_libs

FILES := amiga2date \
	amigademo \
	date2amiga \
	dosvartest \
	exceptiontest \
	fileseek \
	filetest \
	gfx \
	iffparsewrite \
	ilbmtoc \
	localetest \
	matchtest \
	mathffp \
	messagetest \
	newmatch \
	scantest \
	semaphoretest \
	showvisregion \
	showvisshape \
	sortlayercr \
	signaltest \
	strtodate \
	tasktest \
	tasktest2 \
	ExNext \
	taskswitchbench \
	randtest \
	enqueue \
	semtorture \
	obtainpentest \
	writepixelarray \
	rawtest \
	camdtree

EXES := $(foreach f,$(FILES),$(EXEDIR)/$(f))
DEPS := $(foreach f,$(FILES),$(OBJDIR)/$(f).d)

#MM test : setup-test
test : $(EXES)
	@$(NOP)

#MM
setup-test :
	%mkdirs_q $(OBJDIR) $(EXEDIR)

#MM
clean ::
	-$(RM) $(EXES)

$(EXEDIR)/% : $(OBJDIR)/%.o $(LIBDIR)/startup.o $(DEPLIBS)
	%link_q

$(OBJDIR)/%.o : %.c
	%compile_q opt=$(APPCFLAGS)

$(OBJDIR)/%.d : %.c
	%mkdepend_q

%common
%include_deps
