#   Copyright (C) 2000 AROS - The Amiga Research OS
#   $Id$
#
#   Makefile for dtdesc

SRC := createdtdesc.c examinedtdesc.c

-include $(TOP)/config/make.cfg

.SUFFIXES:
.SUFFIXES: .c .o

# These are the compatibility variables. They will only be defined
# if including $(TOP)/config/make.cfg fails (since they will then
# be undefined.

HOST_CC	    ?= $(CC)
HOST_STRIP  ?= strip
MKDIR	    ?= mkdir
HOST_CFLAGS ?= -Wall -g -O
INCL	    := -I. -I c_iff
TOOLDIR	    ?= .
OBJDIR	    ?= $(TOOLDIR)/obj

RM	    ?= rm -f
AR	    ?= ar rv
RANLIB	    ?= ranlib

CREATEDTDESC ?= createdtdesc

all: $(OBJDIR) $(CREATEDTDESC) examinedtdesc

$(CREATEDTDESC): $(OBJDIR)/createdtdesc.o c_iff/libc_iff.a
	$(HOST_CC) -o $(CREATEDTDESC) $(OBJDIR)/createdtdesc.o -L c_iff/ -l c_iff

examinedtdesc: $(OBJDIR)/examinedtdesc.o c_iff/libc_iff.a
	$(HOST_CC) -o examinedtdesc $(OBJDIR)/examinedtdesc.o -L c_iff/ -l c_iff

$(OBJDIR)/%.o : %.c
	$(HOST_CC) $(HOST_CFLAGS) $(INCL) -c $< -o $@

c_iff/libc_iff.a:
	$(MAKE) $(MKARGS) -C $(TOP)/tools/dtdesc/c_iff -f Makefile.aros TOP=$(TOP)

$(OBJDIR) :
	$(MKDIR) $(OBJDIR)

clean:
	$(RM) *.o
	$(RM) examinedtdesc
	$(RM) $(CREATEDTDESC)
	$(MAKE) $(MKARGS) -C $(TOP)/tools/dtdesc/c_iff -f Makefile.aros TOP=$(TOP) clean
