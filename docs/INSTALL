$Id$

Basic Installation of AROS-SOURCES
----------------------------------

1. Get the source tree.

	As you can read this text, I assume that you already have the
	sources from the CVS server, AmiNet or the AROS FTP server.

	To obtain a recent version via cvs, do a "cvs update -d -P",
	so you get all new files and directories.

	Locations are:

	* CVS - Bleeding edge
	:pserver:username@cvs.aros.org/home/cvs/aros

	* AmiNet - Stable releases
	misc/emu

	* AROS FTP - All releases
	ftp://ftp.aros.org/


2. Install the tree, say in "/usr/src" or anything apropriate.

	It is possible to build AROS in your main cvs-copy, as all
	generated files should be ignored by the CVS server, but I
	think it is better to leave your copy clean, if you can afford
	the disk space.  A complete compilation has over 6000 files
	(inodes) and approx. 50 MegaByte for -O2 optimized binaries!


3. Make sure you have all the necessary tools for compilation.

	I.e. a C-compiler (gcc/egcs recommended), binutils, gawk, etc.


4. Run "autoconf".

	This generates the configure script from configure.in.


5. Run "./configure" with possible options:

	* '--with-resolution=XRESxYRESxDEPTH'
	  This is the resolution and depth in bits of the initial
	  Workbench Screen.
	  The default resolution is 800x600x8 for X11 and 640x480x4
	  for native-i386 (std. VGA resolution).  This value will
	  be cached.

	* Supported targets

	  On Linux or FreeBSD PC's the default is an emulation
	  environment based on top of Linux/FreeBSD and X11

	  additional target:

	  	--target=pc-i386

	  AROS bootable from floppy disk.


	Use "./configure --help" for all possible options.


6. Configure make.opts

	AROS/bin/$arch-$cpu/gen/config/make.defaults (with $arch and
	$cpu being your target specifications, eg. arch=pc cpu=i386)
	contains the default values for compilation.
	Copy this file to make.opts in the same directory and edit it
	to your needs.
	Options are documented in the default file.

	target=pc-i386 requires all SHARED_* options to set to "no".
	This will be done automatically in make.defaults, don't
	change it.


7. Compile your sources.

	Call the wrapper Makefile with 'make'

	If you intend to compile for many targets in one source tree,
	then you have to go through step 5 and 6 for each of your
	targets.  You can add targets at any time you want.
	The last target specified to "configure" is the default target.

	To change the target, simply type
	'TARGET_ARCH=$arch TARGET_CPU=$cpu make'
	where arch and cpu are chosen as in step 6. If you build eg.
	linux-i386 and freebsd-i386, then specifying only TARGET_ARCH
	will suffice as the CPU stays the same.

	Build for multiple host architectures (eg. when sharing the
	sources over nfs on a heterogene network) is somewhat broken
	now, but should work in future by specifying $HOST_ARCH and
	$HOST_CPU if different from the one from which configure is
	run.


8. Install the package.

	If you compiled AROS as an emulation then all binaries are
	placed in AROS/bin/$arch-$cpu/AROS. To start AROS 'cd' into
	this dir, type 'aros' and enjoy!

	If you compiled AROS as stand alone (native), then do a
	'make install' to write the boot image to a floppy disk.
	Then leave the disk in /dev/fd0 (Drive A:), reboot your
	machine and enjoy!


9. Setting the correct keymap.

	If you compiled AROS as an emulation, you might have noticed
	that the keyboard maybe doesn't work as expected. Ie, you
	can't input colons, slashes and other nice characters.

	To remedy this, run 'make default-x11keymaptable'. This will
	install the default keymaptable in DEVS:Keymaps/X11. If this
	does not work, run 'make x11keymaptable'. This will open a
	window and ask you to press all keys in a special order.

	Now your keyboard should behave like an American/English
	keyboard.  If you have a different keyboard you have to load
	the AROS keymap, using the 'SetKeyboard' program. If you have
	a Swedish keyboard, type 'SetKeyboard pc105_s' from the AROS
	Shell. If you have a German keyboard, type 'SetKeyboard pc105_d',
	for an Italian keyboard 'SetKeyboard pc105_i' or for a Norwegian
	keyboard 'SetKeyboard pc105_n'.

	Only English, German, Italian, Swedish and Norwegian keyboards
	are supported at the moment.

