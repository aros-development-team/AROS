# $Id$
include $(TOP)/config/make.cfg

BCPL_CFILES  := bcpl_support bcpl_readargs bcpl_putpkt
BCPL_AFILES  := bcpl bcpl_writef

CFUNCS  := \
	addbuffers adddosentry assignlock changemode close  \
	createdir deletefile duplock duplockfromfh \
	endnotify errorreport exall exallend examine examinefh  \
	exnext finddosentry getdeviceproc info isfilesystem \
	isinteractive namefrom namefromfh namefromlock \
	parentdir parentoffh read rename \
	runhandler samedevice samelock sendpkt \
	setprotection startnotify unlock write \
	waitforchar lockrecord unlockrecord readlink makelink \
	openfromlock pipe setfilesize setmode waitpkt setfiledate \
	setcomment format inhibit relabel setowner abortpkt \
	replypkt

CFILES  := $(CFUNCS) \
	fs_driver helper internalseek packethelper \
	$(BCPL_CFILES)

AFILES := $(BCPL_AFILES)

#MM kernel-dos-amiga-m68k : kernel-dos-includes includes-asm_h-m68k

USER_CFLAGS := -I$(SRCDIR)/arch/$(CPU)-$(ARCH)/dos \
               -I$(SRCDIR)/rom/dos \
               -D__DOS_NOLIBBASE__ \
               $(PARANOIA_CFLAGS)

USER_AFLAGS := -I$(GENINCDIR)

%build_archspecific \
  mainmmake=kernel-dos maindir=rom/dos arch=amiga-m68k \
  files="$(CFILES)" asmfiles="$(AFILES)" modulename=dos

%common
