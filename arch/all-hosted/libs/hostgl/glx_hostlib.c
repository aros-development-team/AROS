#include <aros/config.h>

#include <aros/symbolsets.h>

#include "hostgl_renderer_config.h"
#include "glx_hostlib.h"

#include <proto/hostlib.h>

#include LC_LIBDEFS_FILE

#define DEBUG 0
#include <aros/debug.h>

void *glx_handle = NULL;
struct glx_func glx_func;

static const char *glx_func_names[] =
{
    "glXChooseFBConfig",
    "glXCreateNewContext",
    "glXDestroyContext",
    "glXGetProcAddress",
    "glXMakeContextCurrent",
    "glXSwapBuffers",
    "glXGetFBConfigAttrib",
#if defined(RENDERER_SEPARATE_X_WINDOW)
    "glXGetVisualFromFBConfig",
    "glXCreateWindow",
    "glXDestroyWindow",
#endif
#if defined(RENDERER_PBUFFER_WPA)
    "glXCreatePbuffer",
    "glXDestroyPbuffer",
#endif
#if defined(RENDERER_PIXMAP_BLIT)
    "glXGetVisualFromFBConfig",
    "glXCreateGLXPixmap",
    "glXDestroyGLXPixmap",
    "glXWaitGL",
    "glXWaitX",
#endif
    NULL
};

struct gl_func gl_func;
static const char *gl_func_names[];

static APTR HostLibBase;

static void *hostlib_load_so(const char *sofile, const char **names, void **funcptr)
{
    void *handle;
    char *err;
    const char *name;
    int i = 0;

    D(bug("[HostGL] loading %d functions from %s\n", nfuncs, sofile));

    if ((handle = HostLib_Open(sofile, &err)) == NULL)
    {
        bug("[HostGL] couldn't open '%s': %s\n", sofile, err);
        return NULL;
    }

    while((name = names[i]) != NULL)
    {
        funcptr[i] = HostLib_GetPointer(handle, name, &err);
        D(bug("%s(%x)\n", name, funcptr[i]));
        if (err != NULL) {
            bug("[HostGL] couldn't get symbol '%s' from '%s': %s\n", name, sofile, err);
            HostLib_Close(handle, NULL);
            return NULL;
        }
        i++;
    }

    D(bug("[HostGL] GLX done\n"));

    return handle;
}

static void load_gl_functions(const char **names, void **funcptr)
{
    const char * name = NULL;
    int i = 0;
    
    while ((name = names[i]) != NULL)
    {
        funcptr[i] = GLXCALL(glXGetProcAddress, name); /* NULLS are allowed */

        /*
         * AROSMesa's linklib prior to version 18 was invalidly redirecting standard GL calls
         * to their NV equivalents. HostGL tries to provide those NV functions by remaping them
         * only ARB function in order for old applications to run correclty.
         */
        if (strstr((char *)name, "NV") != NULL)
        {
            if (funcptr[i] == NULL)
            {
                char dupname[128] = {0};
                CopyMem(name, dupname, strlen((char *)name) + 1);
                char * lastptr = strstr(dupname, "NV");
                CopyMem("ARB\0", lastptr, 4);

                funcptr[i] = GLXCALL(glXGetProcAddress, dupname); /* NULLS are allowed */
            }
        }

        D(if (funcptr[i] == NULL) bug("[HostGL] Not found: %s\n", name));
        i++;
    }
}

static int glx_hostlib_init(LIBBASETYPEPTR LIBBASE)
{
    D(bug("[HostGL] GLX hostlib init\n"));

    if ((HostLibBase = OpenResource("hostlib.resource")) == NULL)
    {
        bug("[HostGL] couldn't open hostlib.resource\n");
        return FALSE;
    }

    if ((glx_handle = hostlib_load_so(GLX_SOFILE, glx_func_names, (void **) &glx_func)) == NULL)
        return FALSE;

    load_gl_functions(gl_func_names, (void **) &gl_func);

    return TRUE;
}

static int glx_hostlib_expunge(LIBBASETYPEPTR LIBBASE)
{
    D(bug("[HostGL] GLX hostlib expunge\n"));

    if (glx_handle != NULL)
        HostLib_Close(glx_handle, NULL);

    return TRUE;
}

ADD2INITLIB(glx_hostlib_init, 0)
ADD2EXPUNGELIB(glx_hostlib_expunge, 0)

static const char *gl_func_names[] =
{
    "glClearIndex",
    "glClearColor",
    "glClear",
    "glIndexMask",
    "glColorMask",
    "glAlphaFunc",
    "glBlendFunc",
    "glLogicOp",
    "glCullFace",
    "glFrontFace",
    "glPointSize",
    "glLineWidth",
    "glLineStipple",
    "glPolygonMode",
    "glPolygonOffset",
    "glPolygonStipple",
    "glGetPolygonStipple",
    "glEdgeFlag",
    "glEdgeFlagv",
    "glScissor",
    "glClipPlane",
    "glGetClipPlane",
    "glDrawBuffer",
    "glReadBuffer",
    "glEnable",
    "glDisable",
    "glIsEnabled",
    "glEnableClientState",
    "glDisableClientState",
    "glGetBooleanv",
    "glGetDoublev",
    "glGetFloatv",
    "glGetIntegerv",
    "glPushAttrib",
    "glPopAttrib",
    "glPushClientAttrib",
    "glPopClientAttrib",
    "glRenderMode",
    "glGetError",
    "glGetString",
    "glFinish",
    "glFlush",
    "glHint",
    "glClearDepth",
    "glDepthFunc",
    "glDepthMask",
    "glDepthRange",
    "glClearAccum",
    "glAccum",
    "glMatrixMode",
    "glOrtho",
    "glFrustum",
    "glViewport",
    "glPushMatrix",
    "glPopMatrix",
    "glLoadIdentity",
    "glLoadMatrixd",
    "glLoadMatrixf",
    "glMultMatrixd",
    "glMultMatrixf",
    "glRotated",
    "glRotatef",
    "glScaled",
    "glScalef",
    "glTranslated",
    "glTranslatef",
    "glIsList",
    "glDeleteLists",
    "glGenLists",
    "glNewList",
    "glEndList",
    "glCallList",
    "glCallLists",
    "glListBase",
    "glBegin",
    "glEnd",
    "glVertex2d",
    "glVertex2f",
    "glVertex2i",
    "glVertex2s",
    "glVertex3d",
    "glVertex3f",
    "glVertex3i",
    "glVertex3s",
    "glVertex4d",
    "glVertex4f",
    "glVertex4i",
    "glVertex4s",
    "glVertex2dv",
    "glVertex2fv",
    "glVertex2iv",
    "glVertex2sv",
    "glVertex3dv",
    "glVertex3fv",
    "glVertex3iv",
    "glVertex3sv",
    "glVertex4dv",
    "glVertex4fv",
    "glVertex4iv",
    "glVertex4sv",
    "glNormal3b",
    "glNormal3d",
    "glNormal3f",
    "glNormal3i",
    "glNormal3s",
    "glNormal3bv",
    "glNormal3dv",
    "glNormal3fv",
    "glNormal3iv",
    "glNormal3sv",
    "glIndexd",
    "glIndexf",
    "glIndexi",
    "glIndexs",
    "glIndexub",
    "glIndexdv",
    "glIndexfv",
    "glIndexiv",
    "glIndexsv",
    "glIndexubv",
    "glColor3b",
    "glColor3d",
    "glColor3f",
    "glColor3i",
    "glColor3s",
    "glColor3ub",
    "glColor3ui",
    "glColor3us",
    "glColor4b",
    "glColor4d",
    "glColor4f",
    "glColor4i",
    "glColor4s",
    "glColor4ub",
    "glColor4ui",
    "glColor4us",
    "glColor3bv",
    "glColor3dv",
    "glColor3fv",
    "glColor3iv",
    "glColor3sv",
    "glColor3ubv",
    "glColor3uiv",
    "glColor3usv",
    "glColor4bv",
    "glColor4dv",
    "glColor4fv",
    "glColor4iv",
    "glColor4sv",
    "glColor4ubv",
    "glColor4uiv",
    "glColor4usv",
    "glTexCoord1d",
    "glTexCoord1f",
    "glTexCoord1i",
    "glTexCoord1s",
    "glTexCoord2d",
    "glTexCoord2f",
    "glTexCoord2i",
    "glTexCoord2s",
    "glTexCoord3d",
    "glTexCoord3f",
    "glTexCoord3i",
    "glTexCoord3s",
    "glTexCoord4d",
    "glTexCoord4f",
    "glTexCoord4i",
    "glTexCoord4s",
    "glTexCoord1dv",
    "glTexCoord1fv",
    "glTexCoord1iv",
    "glTexCoord1sv",
    "glTexCoord2dv",
    "glTexCoord2fv",
    "glTexCoord2iv",
    "glTexCoord2sv",
    "glTexCoord3dv",
    "glTexCoord3fv",
    "glTexCoord3iv",
    "glTexCoord3sv",
    "glTexCoord4dv",
    "glTexCoord4fv",
    "glTexCoord4iv",
    "glTexCoord4sv",
    "glRasterPos2d",
    "glRasterPos2f",
    "glRasterPos2i",
    "glRasterPos2s",
    "glRasterPos3d",
    "glRasterPos3f",
    "glRasterPos3i",
    "glRasterPos3s",
    "glRasterPos4d",
    "glRasterPos4f",
    "glRasterPos4i",
    "glRasterPos4s",
    "glRasterPos2dv",
    "glRasterPos2fv",
    "glRasterPos2iv",
    "glRasterPos2sv",
    "glRasterPos3dv",
    "glRasterPos3fv",
    "glRasterPos3iv",
    "glRasterPos3sv",
    "glRasterPos4dv",
    "glRasterPos4fv",
    "glRasterPos4iv",
    "glRasterPos4sv",
    "glRectd",
    "glRectf",
    "glRecti",
    "glRects",
    "glRectdv",
    "glRectfv",
    "glRectiv",
    "glRectsv",
    "glVertexPointer",
    "glNormalPointer",
    "glColorPointer",
    "glIndexPointer",
    "glTexCoordPointer",
    "glEdgeFlagPointer",
    "glGetPointerv",
    "glArrayElement",
    "glDrawArrays",
    "glDrawElements",
    "glInterleavedArrays",
    "glShadeModel",
    "glLightf",
    "glLighti",
    "glLightfv",
    "glLightiv",
    "glGetLightfv",
    "glGetLightiv",
    "glLightModelf",
    "glLightModeli",
    "glLightModelfv",
    "glLightModeliv",
    "glMaterialf",
    "glMateriali",
    "glMaterialfv",
    "glMaterialiv",
    "glGetMaterialfv",
    "glGetMaterialiv",
    "glColorMaterial",
    "glPixelZoom",
    "glPixelStoref",
    "glPixelStorei",
    "glPixelTransferf",
    "glPixelTransferi",
    "glPixelMapfv",
    "glPixelMapuiv",
    "glPixelMapusv",
    "glGetPixelMapfv",
    "glGetPixelMapuiv",
    "glGetPixelMapusv",
    "glBitmap",
    "glReadPixels",
    "glDrawPixels",
    "glCopyPixels",
    "glStencilFunc",
    "glStencilMask",
    "glStencilOp",
    "glClearStencil",
    "glTexGend",
    "glTexGenf",
    "glTexGeni",
    "glTexGendv",
    "glTexGenfv",
    "glTexGeniv",
    "glGetTexGendv",
    "glGetTexGenfv",
    "glGetTexGeniv",
    "glTexEnvf",
    "glTexEnvi",
    "glTexEnvfv",
    "glTexEnviv",
    "glGetTexEnvfv",
    "glGetTexEnviv",
    "glTexParameterf",
    "glTexParameteri",
    "glTexParameterfv",
    "glTexParameteriv",
    "glGetTexParameterfv",
    "glGetTexParameteriv",
    "glGetTexLevelParameterfv",
    "glGetTexLevelParameteriv",
    "glTexImage1D",
    "glTexImage2D",
    "glGetTexImage",
    "glGenTextures",
    "glDeleteTextures",
    "glBindTexture",
    "glPrioritizeTextures",
    "glAreTexturesResident",
    "glIsTexture",
    "glTexSubImage1D",
    "glTexSubImage2D",
    "glCopyTexImage1D",
    "glCopyTexImage2D",
    "glCopyTexSubImage1D",
    "glCopyTexSubImage2D",
    "glMap1d",
    "glMap1f",
    "glMap2d",
    "glMap2f",
    "glGetMapdv",
    "glGetMapfv",
    "glGetMapiv",
    "glEvalCoord1d",
    "glEvalCoord1f",
    "glEvalCoord1dv",
    "glEvalCoord1fv",
    "glEvalCoord2d",
    "glEvalCoord2f",
    "glEvalCoord2dv",
    "glEvalCoord2fv",
    "glMapGrid1d",
    "glMapGrid1f",
    "glMapGrid2d",
    "glMapGrid2f",
    "glEvalPoint1",
    "glEvalPoint2",
    "glEvalMesh1",
    "glEvalMesh2",
    "glFogf",
    "glFogi",
    "glFogfv",
    "glFogiv",
    "glFeedbackBuffer",
    "glPassThrough",
    "glSelectBuffer",
    "glInitNames",
    "glLoadName",
    "glPushName",
    "glPopName",
    "glDrawRangeElements",
    "glTexImage3D",
    "glTexSubImage3D",
    "glCopyTexSubImage3D",
    "glColorTable",
    "glColorSubTable",
    "glColorTableParameteriv",
    "glColorTableParameterfv",
    "glCopyColorSubTable",
    "glCopyColorTable",
    "glGetColorTable",
    "glGetColorTableParameterfv",
    "glGetColorTableParameteriv",
    "glBlendEquation",
    "glBlendColor",
    "glHistogram",
    "glResetHistogram",
    "glGetHistogram",
    "glGetHistogramParameterfv",
    "glGetHistogramParameteriv",
    "glMinmax",
    "glResetMinmax",
    "glGetMinmax",
    "glGetMinmaxParameterfv",
    "glGetMinmaxParameteriv",
    "glConvolutionFilter1D",
    "glConvolutionFilter2D",
    "glConvolutionParameterf",
    "glConvolutionParameterfv",
    "glConvolutionParameteri",
    "glConvolutionParameteriv",
    "glCopyConvolutionFilter1D",
    "glCopyConvolutionFilter2D",
    "glGetConvolutionFilter",
    "glGetConvolutionParameterfv",
    "glGetConvolutionParameteriv",
    "glSeparableFilter2D",
    "glGetSeparableFilter",
    "glActiveTexture",
    "glClientActiveTexture",
    "glCompressedTexImage1D",
    "glCompressedTexImage2D",
    "glCompressedTexImage3D",
    "glCompressedTexSubImage1D",
    "glCompressedTexSubImage2D",
    "glCompressedTexSubImage3D",
    "glGetCompressedTexImage",
    "glMultiTexCoord1d",
    "glMultiTexCoord1dv",
    "glMultiTexCoord1f",
    "glMultiTexCoord1fv",
    "glMultiTexCoord1i",
    "glMultiTexCoord1iv",
    "glMultiTexCoord1s",
    "glMultiTexCoord1sv",
    "glMultiTexCoord2d",
    "glMultiTexCoord2dv",
    "glMultiTexCoord2f",
    "glMultiTexCoord2fv",
    "glMultiTexCoord2i",
    "glMultiTexCoord2iv",
    "glMultiTexCoord2s",
    "glMultiTexCoord2sv",
    "glMultiTexCoord3d",
    "glMultiTexCoord3dv",
    "glMultiTexCoord3f",
    "glMultiTexCoord3fv",
    "glMultiTexCoord3i",
    "glMultiTexCoord3iv",
    "glMultiTexCoord3s",
    "glMultiTexCoord3sv",
    "glMultiTexCoord4d",
    "glMultiTexCoord4dv",
    "glMultiTexCoord4f",
    "glMultiTexCoord4fv",
    "glMultiTexCoord4i",
    "glMultiTexCoord4iv",
    "glMultiTexCoord4s",
    "glMultiTexCoord4sv",
    "glLoadTransposeMatrixd",
    "glLoadTransposeMatrixf",
    "glMultTransposeMatrixd",
    "glMultTransposeMatrixf",
    "glSampleCoverage",
    "glActiveTextureARB",
    "glClientActiveTextureARB",
    "glMultiTexCoord1dARB",
    "glMultiTexCoord1dvARB",
    "glMultiTexCoord1fARB",
    "glMultiTexCoord1fvARB",
    "glMultiTexCoord1iARB",
    "glMultiTexCoord1ivARB",
    "glMultiTexCoord1sARB",
    "glMultiTexCoord1svARB",
    "glMultiTexCoord2dARB",
    "glMultiTexCoord2dvARB",
    "glMultiTexCoord2fARB",
    "glMultiTexCoord2fvARB",
    "glMultiTexCoord2iARB",
    "glMultiTexCoord2ivARB",
    "glMultiTexCoord2sARB",
    "glMultiTexCoord2svARB",
    "glMultiTexCoord3dARB",
    "glMultiTexCoord3dvARB",
    "glMultiTexCoord3fARB",
    "glMultiTexCoord3fvARB",
    "glMultiTexCoord3iARB",
    "glMultiTexCoord3ivARB",
    "glMultiTexCoord3sARB",
    "glMultiTexCoord3svARB",
    "glMultiTexCoord4dARB",
    "glMultiTexCoord4dvARB",
    "glMultiTexCoord4fARB",
    "glMultiTexCoord4fvARB",
    "glMultiTexCoord4iARB",
    "glMultiTexCoord4ivARB",
    "glMultiTexCoord4sARB",
    "glMultiTexCoord4svARB",
    "glBlendFuncSeparate",
    "glFogCoordf",
    "glFogCoordfv",
    "glFogCoordd",
    "glFogCoorddv",
    "glFogCoordPointer",
    "glMultiDrawArrays",
    "glMultiDrawElements",
    "glPointParameterf",
    "glPointParameterfv",
    "glPointParameteri",
    "glPointParameteriv",
    "glSecondaryColor3b",
    "glSecondaryColor3bv",
    "glSecondaryColor3d",
    "glSecondaryColor3dv",
    "glSecondaryColor3f",
    "glSecondaryColor3fv",
    "glSecondaryColor3i",
    "glSecondaryColor3iv",
    "glSecondaryColor3s",
    "glSecondaryColor3sv",
    "glSecondaryColor3ub",
    "glSecondaryColor3ubv",
    "glSecondaryColor3ui",
    "glSecondaryColor3uiv",
    "glSecondaryColor3us",
    "glSecondaryColor3usv",
    "glSecondaryColorPointer",
    "glWindowPos2d",
    "glWindowPos2dv",
    "glWindowPos2f",
    "glWindowPos2fv",
    "glWindowPos2i",
    "glWindowPos2iv",
    "glWindowPos2s",
    "glWindowPos2sv",
    "glWindowPos3d",
    "glWindowPos3dv",
    "glWindowPos3f",
    "glWindowPos3fv",
    "glWindowPos3i",
    "glWindowPos3iv",
    "glWindowPos3s",
    "glWindowPos3sv",
    "glGenQueries",
    "glDeleteQueries",
    "glIsQuery",
    "glBeginQuery",
    "glEndQuery",
    "glGetQueryiv",
    "glGetQueryObjectiv",
    "glGetQueryObjectuiv",
    "glBindBuffer",
    "glDeleteBuffers",
    "glGenBuffers",
    "glIsBuffer",
    "glBufferData",
    "glBufferSubData",
    "glGetBufferSubData",
    "glMapBuffer",
    "glUnmapBuffer",
    "glGetBufferParameteriv",
    "glGetBufferPointerv",
    "glBlendEquationSeparate",
    "glDrawBuffers",
    "glStencilOpSeparate",
    "glStencilFuncSeparate",
    "glStencilMaskSeparate",
    "glAttachShader",
    "glBindAttribLocation",
    "glCompileShader",
    "glCreateProgram",
    "glCreateShader",
    "glDeleteProgram",
    "glDeleteShader",
    "glDetachShader",
    "glDisableVertexAttribArray",
    "glEnableVertexAttribArray",
    "glGetActiveAttrib",
    "glGetActiveUniform",
    "glGetAttachedShaders",
    "glGetAttribLocation",
    "glGetProgramiv",
    "glGetProgramInfoLog",
    "glGetShaderiv",
    "glGetShaderInfoLog",
    "glGetShaderSource",
    "glGetUniformLocation",
    "glGetUniformfv",
    "glGetUniformiv",
    "glGetVertexAttribdv",
    "glGetVertexAttribfv",
    "glGetVertexAttribiv",
    "glGetVertexAttribPointerv",
    "glIsProgram",
    "glIsShader",
    "glLinkProgram",
    "glShaderSource",
    "glUseProgram",
    "glUniform1f",
    "glUniform2f",
    "glUniform3f",
    "glUniform4f",
    "glUniform1i",
    "glUniform2i",
    "glUniform3i",
    "glUniform4i",
    "glUniform1fv",
    "glUniform2fv",
    "glUniform3fv",
    "glUniform4fv",
    "glUniform1iv",
    "glUniform2iv",
    "glUniform3iv",
    "glUniform4iv",
    "glUniformMatrix2fv",
    "glUniformMatrix3fv",
    "glUniformMatrix4fv",
    "glValidateProgram",
    "glVertexAttrib1d",
    "glVertexAttrib1dv",
    "glVertexAttrib1f",
    "glVertexAttrib1fv",
    "glVertexAttrib1s",
    "glVertexAttrib1sv",
    "glVertexAttrib2d",
    "glVertexAttrib2dv",
    "glVertexAttrib2f",
    "glVertexAttrib2fv",
    "glVertexAttrib2s",
    "glVertexAttrib2sv",
    "glVertexAttrib3d",
    "glVertexAttrib3dv",
    "glVertexAttrib3f",
    "glVertexAttrib3fv",
    "glVertexAttrib3s",
    "glVertexAttrib3sv",
    "glVertexAttrib4Nbv",
    "glVertexAttrib4Niv",
    "glVertexAttrib4Nsv",
    "glVertexAttrib4Nub",
    "glVertexAttrib4Nubv",
    "glVertexAttrib4Nuiv",
    "glVertexAttrib4Nusv",
    "glVertexAttrib4bv",
    "glVertexAttrib4d",
    "glVertexAttrib4dv",
    "glVertexAttrib4f",
    "glVertexAttrib4fv",
    "glVertexAttrib4iv",
    "glVertexAttrib4s",
    "glVertexAttrib4sv",
    "glVertexAttrib4ubv",
    "glVertexAttrib4uiv",
    "glVertexAttrib4usv",
    "glVertexAttribPointer",
    "glUniformMatrix2x3fv",
    "glUniformMatrix3x2fv",
    "glUniformMatrix2x4fv",
    "glUniformMatrix4x2fv",
    "glUniformMatrix3x4fv",
    "glUniformMatrix4x3fv",
    "glLoadTransposeMatrixfARB",
    "glLoadTransposeMatrixdARB",
    "glMultTransposeMatrixfARB",
    "glMultTransposeMatrixdARB",
    "glSampleCoverageARB",
    "glCompressedTexImage3DARB",
    "glCompressedTexImage2DARB",
    "glCompressedTexImage1DARB",
    "glCompressedTexSubImage3DARB",
    "glCompressedTexSubImage2DARB",
    "glCompressedTexSubImage1DARB",
    "glGetCompressedTexImageARB",
    "glPointParameterfARB",
    "glPointParameterfvARB",
    "glWindowPos2dARB",
    "glWindowPos2dvARB",
    "glWindowPos2fARB",
    "glWindowPos2fvARB",
    "glWindowPos2iARB",
    "glWindowPos2ivARB",
    "glWindowPos2sARB",
    "glWindowPos2svARB",
    "glWindowPos3dARB",
    "glWindowPos3dvARB",
    "glWindowPos3fARB",
    "glWindowPos3fvARB",
    "glWindowPos3iARB",
    "glWindowPos3ivARB",
    "glWindowPos3sARB",
    "glWindowPos3svARB",
    "glVertexAttrib1dARB",
    "glVertexAttrib1dvARB",
    "glVertexAttrib1fARB",
    "glVertexAttrib1fvARB",
    "glVertexAttrib1sARB",
    "glVertexAttrib1svARB",
    "glVertexAttrib2dARB",
    "glVertexAttrib2dvARB",
    "glVertexAttrib2fARB",
    "glVertexAttrib2fvARB",
    "glVertexAttrib2sARB",
    "glVertexAttrib2svARB",
    "glVertexAttrib3dARB",
    "glVertexAttrib3dvARB",
    "glVertexAttrib3fARB",
    "glVertexAttrib3fvARB",
    "glVertexAttrib3sARB",
    "glVertexAttrib3svARB",
    "glVertexAttrib4NbvARB",
    "glVertexAttrib4NivARB",
    "glVertexAttrib4NsvARB",
    "glVertexAttrib4NubARB",
    "glVertexAttrib4NubvARB",
    "glVertexAttrib4NuivARB",
    "glVertexAttrib4NusvARB",
    "glVertexAttrib4bvARB",
    "glVertexAttrib4dARB",
    "glVertexAttrib4dvARB",
    "glVertexAttrib4fARB",
    "glVertexAttrib4fvARB",
    "glVertexAttrib4ivARB",
    "glVertexAttrib4sARB",
    "glVertexAttrib4svARB",
    "glVertexAttrib4ubvARB",
    "glVertexAttrib4uivARB",
    "glVertexAttrib4usvARB",
    "glVertexAttribPointerARB",
    "glEnableVertexAttribArrayARB",
    "glDisableVertexAttribArrayARB",
    "glProgramStringARB",
    "glBindProgramARB",
    "glDeleteProgramsARB",
    "glGenProgramsARB",
    "glProgramEnvParameter4dARB",
    "glProgramEnvParameter4dvARB",
    "glProgramEnvParameter4fARB",
    "glProgramEnvParameter4fvARB",
    "glProgramLocalParameter4dARB",
    "glProgramLocalParameter4dvARB",
    "glProgramLocalParameter4fARB",
    "glProgramLocalParameter4fvARB",
    "glGetProgramEnvParameterdvARB",
    "glGetProgramEnvParameterfvARB",
    "glGetProgramLocalParameterdvARB",
    "glGetProgramLocalParameterfvARB",
    "glGetProgramivARB",
    "glGetProgramStringARB",
    "glGetVertexAttribdvARB",
    "glGetVertexAttribfvARB",
    "glGetVertexAttribivARB",
    "glGetVertexAttribPointervARB",
    "glIsProgramARB",
    "glBindBufferARB",
    "glDeleteBuffersARB",
    "glGenBuffersARB",
    "glIsBufferARB",
    "glBufferDataARB",
    "glBufferSubDataARB",
    "glGetBufferSubDataARB",
    "glMapBufferARB",
    "glUnmapBufferARB",
    "glGetBufferParameterivARB",
    "glGetBufferPointervARB",
    "glGenQueriesARB",
    "glDeleteQueriesARB",
    "glIsQueryARB",
    "glBeginQueryARB",
    "glEndQueryARB",
    "glGetQueryivARB",
    "glGetQueryObjectivARB",
    "glGetQueryObjectuivARB",
    "glDeleteObjectARB",
    "glGetHandleARB",
    "glDetachObjectARB",
    "glCreateShaderObjectARB",
    "glShaderSourceARB",
    "glCompileShaderARB",
    "glCreateProgramObjectARB",
    "glAttachObjectARB",
    "glLinkProgramARB",
    "glUseProgramObjectARB",
    "glValidateProgramARB",
    "glUniform1fARB",
    "glUniform2fARB",
    "glUniform3fARB",
    "glUniform4fARB",
    "glUniform1iARB",
    "glUniform2iARB",
    "glUniform3iARB",
    "glUniform4iARB",
    "glUniform1fvARB",
    "glUniform2fvARB",
    "glUniform3fvARB",
    "glUniform4fvARB",
    "glUniform1ivARB",
    "glUniform2ivARB",
    "glUniform3ivARB",
    "glUniform4ivARB",
    "glUniformMatrix2fvARB",
    "glUniformMatrix3fvARB",
    "glUniformMatrix4fvARB",
    "glGetObjectParameterfvARB",
    "glGetObjectParameterivARB",
    "glGetInfoLogARB",
    "glGetAttachedObjectsARB",
    "glGetUniformLocationARB",
    "glGetActiveUniformARB",
    "glGetUniformfvARB",
    "glGetUniformivARB",
    "glGetShaderSourceARB",
    "glBindAttribLocationARB",
    "glGetActiveAttribARB",
    "glGetAttribLocationARB",
    "glDrawBuffersARB",
    "glIsRenderbuffer",
    "glBindRenderbuffer",
    "glDeleteRenderbuffers",
    "glGenRenderbuffers",
    "glRenderbufferStorage",
    "glGetRenderbufferParameteriv",
    "glIsFramebuffer",
    "glBindFramebuffer",
    "glDeleteFramebuffers",
    "glGenFramebuffers",
    "glCheckFramebufferStatus",
    "glFramebufferTexture1D",
    "glFramebufferTexture2D",
    "glFramebufferTexture3D",
    "glFramebufferRenderbuffer",
    "glGetFramebufferAttachmentParameteriv",
    "glGenerateMipmap",
    "glBlitFramebuffer",
    "glRenderbufferStorageMultisample",
    "glFramebufferTextureLayer",
    "glBlendColorEXT",
    "glPolygonOffsetEXT",
    "glTexImage3DEXT",
    "glTexSubImage3DEXT",
    "glTexSubImage1DEXT",
    "glTexSubImage2DEXT",
    "glCopyTexImage1DEXT",
    "glCopyTexImage2DEXT",
    "glCopyTexSubImage1DEXT",
    "glCopyTexSubImage2DEXT",
    "glCopyTexSubImage3DEXT",
    "glAreTexturesResidentEXT",
    "glBindTextureEXT",
    "glDeleteTexturesEXT",
    "glGenTexturesEXT",
    "glIsTextureEXT",
    "glPrioritizeTexturesEXT",
    "glArrayElementEXT",
    "glColorPointerEXT",
    "glDrawArraysEXT",
    "glEdgeFlagPointerEXT",
    "glGetPointervEXT",
    "glIndexPointerEXT",
    "glNormalPointerEXT",
    "glTexCoordPointerEXT",
    "glVertexPointerEXT",
    "glBlendEquationEXT",
    "glPointParameterfEXT",
    "glPointParameterfvEXT",
    "glColorTableEXT",
    "glGetColorTableEXT",
    "glGetColorTableParameterivEXT",
    "glGetColorTableParameterfvEXT",
    "glLockArraysEXT",
    "glUnlockArraysEXT",
    "glDrawRangeElementsEXT",
    "glSecondaryColor3bEXT",
    "glSecondaryColor3bvEXT",
    "glSecondaryColor3dEXT",
    "glSecondaryColor3dvEXT",
    "glSecondaryColor3fEXT",
    "glSecondaryColor3fvEXT",
    "glSecondaryColor3iEXT",
    "glSecondaryColor3ivEXT",
    "glSecondaryColor3sEXT",
    "glSecondaryColor3svEXT",
    "glSecondaryColor3ubEXT",
    "glSecondaryColor3ubvEXT",
    "glSecondaryColor3uiEXT",
    "glSecondaryColor3uivEXT",
    "glSecondaryColor3usEXT",
    "glSecondaryColor3usvEXT",
    "glSecondaryColorPointerEXT",
    "glMultiDrawArraysEXT",
    "glMultiDrawElementsEXT",
    "glFogCoordfEXT",
    "glFogCoordfvEXT",
    "glFogCoorddEXT",
    "glFogCoorddvEXT",
    "glFogCoordPointerEXT",
    "glBlendFuncSeparateEXT",
    "glFlushVertexArrayRangeNV",
    "glVertexArrayRangeNV",
    "glCombinerParameterfvNV",
    "glCombinerParameterfNV",
    "glCombinerParameterivNV",
    "glCombinerParameteriNV",
    "glCombinerInputNV",
    "glCombinerOutputNV",
    "glFinalCombinerInputNV",
    "glGetCombinerInputParameterfvNV",
    "glGetCombinerInputParameterivNV",
    "glGetCombinerOutputParameterfvNV",
    "glGetCombinerOutputParameterivNV",
    "glGetFinalCombinerInputParameterfvNV",
    "glGetFinalCombinerInputParameterivNV",
    "glResizeBuffersMESA",
    "glWindowPos2dMESA",
    "glWindowPos2dvMESA",
    "glWindowPos2fMESA",
    "glWindowPos2fvMESA",
    "glWindowPos2iMESA",
    "glWindowPos2ivMESA",
    "glWindowPos2sMESA",
    "glWindowPos2svMESA",
    "glWindowPos3dMESA",
    "glWindowPos3dvMESA",
    "glWindowPos3fMESA",
    "glWindowPos3fvMESA",
    "glWindowPos3iMESA",
    "glWindowPos3ivMESA",
    "glWindowPos3sMESA",
    "glWindowPos3svMESA",
    "glWindowPos4dMESA",
    "glWindowPos4dvMESA",
    "glWindowPos4fMESA",
    "glWindowPos4fvMESA",
    "glWindowPos4iMESA",
    "glWindowPos4ivMESA",
    "glWindowPos4sMESA",
    "glWindowPos4svMESA",
    "glAreProgramsResidentNV",
    "glBindProgramNV",
    "glDeleteProgramsNV",
    "glExecuteProgramNV",
    "glGenProgramsNV",
    "glGetProgramParameterdvNV",
    "glGetProgramParameterfvNV",
    "glGetProgramivNV",
    "glGetProgramStringNV",
    "glGetTrackMatrixivNV",
    "glGetVertexAttribdvNV",
    "glGetVertexAttribfvNV",
    "glGetVertexAttribivNV",
    "glGetVertexAttribPointervNV",
    "glIsProgramNV",
    "glLoadProgramNV",
    "glProgramParameter4dNV",
    "glProgramParameter4dvNV",
    "glProgramParameter4fNV",
    "glProgramParameter4fvNV",
    "glProgramParameters4dvNV",
    "glProgramParameters4fvNV",
    "glRequestResidentProgramsNV",
    "glTrackMatrixNV",
    "glVertexAttribPointerNV",
    "glVertexAttrib1dNV",
    "glVertexAttrib1dvNV",
    "glVertexAttrib1fNV",
    "glVertexAttrib1fvNV",
    "glVertexAttrib1sNV",
    "glVertexAttrib1svNV",
    "glVertexAttrib2dNV",
    "glVertexAttrib2dvNV",
    "glVertexAttrib2fNV",
    "glVertexAttrib2fvNV",
    "glVertexAttrib2sNV",
    "glVertexAttrib2svNV",
    "glVertexAttrib3dNV",
    "glVertexAttrib3dvNV",
    "glVertexAttrib3fNV",
    "glVertexAttrib3fvNV",
    "glVertexAttrib3sNV",
    "glVertexAttrib3svNV",
    "glVertexAttrib4dNV",
    "glVertexAttrib4dvNV",
    "glVertexAttrib4fNV",
    "glVertexAttrib4fvNV",
    "glVertexAttrib4sNV",
    "glVertexAttrib4svNV",
    "glVertexAttrib4ubNV",
    "glVertexAttrib4ubvNV",
    "glVertexAttribs1dvNV",
    "glVertexAttribs1fvNV",
    "glVertexAttribs1svNV",
    "glVertexAttribs2dvNV",
    "glVertexAttribs2fvNV",
    "glVertexAttribs2svNV",
    "glVertexAttribs3dvNV",
    "glVertexAttribs3fvNV",
    "glVertexAttribs3svNV",
    "glVertexAttribs4dvNV",
    "glVertexAttribs4fvNV",
    "glVertexAttribs4svNV",
    "glVertexAttribs4ubvNV",
    "glTexBumpParameterivATI",
    "glTexBumpParameterfvATI",
    "glGetTexBumpParameterivATI",
    "glGetTexBumpParameterfvATI",
    "glGenFragmentShadersATI",
    "glBindFragmentShaderATI",
    "glDeleteFragmentShaderATI",
    "glBeginFragmentShaderATI",
    "glEndFragmentShaderATI",
    "glPassTexCoordATI",
    "glSampleMapATI",
    "glColorFragmentOp1ATI",
    "glColorFragmentOp2ATI",
    "glColorFragmentOp3ATI",
    "glAlphaFragmentOp1ATI",
    "glAlphaFragmentOp2ATI",
    "glAlphaFragmentOp3ATI",
    "glSetFragmentShaderConstantATI",
    "glPointParameteriNV",
    "glPointParameterivNV",
    "glDrawBuffersATI",
    "glProgramNamedParameter4fNV",
    "glProgramNamedParameter4dNV",
    "glProgramNamedParameter4fvNV",
    "glProgramNamedParameter4dvNV",
    "glGetProgramNamedParameterfvNV",
    "glGetProgramNamedParameterdvNV",
    "glIsRenderbufferEXT",
    "glBindRenderbufferEXT",
    "glDeleteRenderbuffersEXT",
    "glGenRenderbuffersEXT",
    "glRenderbufferStorageEXT",
    "glGetRenderbufferParameterivEXT",
    "glIsFramebufferEXT",
    "glBindFramebufferEXT",
    "glDeleteFramebuffersEXT",
    "glGenFramebuffersEXT",
    "glCheckFramebufferStatusEXT",
    "glFramebufferTexture1DEXT",
    "glFramebufferTexture2DEXT",
    "glFramebufferTexture3DEXT",
    "glFramebufferRenderbufferEXT",
    "glGetFramebufferAttachmentParameterivEXT",
    "glGenerateMipmapEXT",
    "glFramebufferTextureLayerEXT",
    "glMapBufferRange",
    "glFlushMappedBufferRange",
    "glBindVertexArray",
    "glDeleteVertexArrays",
    "glGenVertexArrays",
    "glIsVertexArray",
    "glCopyBufferSubData",
    "glFenceSync",
    "glIsSync",
    "glDeleteSync",
    "glClientWaitSync",
    "glWaitSync",
    "glGetInteger64v",
    "glGetSynciv",
    "glProvokingVertexEXT",
    "glDrawElementsBaseVertex",
    "glDrawRangeElementsBaseVertex",
    "glMultiDrawElementsBaseVertex",
    "glProvokingVertex",
    "glRenderbufferStorageMultisampleEXT",
    "glColorMaskIndexedEXT",
    "glGetBooleanIndexedvEXT",
    "glGetIntegerIndexedvEXT",
    "glEnableIndexedEXT",
    "glDisableIndexedEXT",
    "glIsEnabledIndexedEXT",
    "glBeginConditionalRenderNV",
    "glEndConditionalRenderNV",
    "glObjectPurgeableAPPLE",
    "glObjectUnpurgeableAPPLE",
    "glGetObjectParameterivAPPLE",
    "glBeginTransformFeedback",
    "glEndTransformFeedback",
    "glBindBufferRange",
    "glBindBufferBase",
    "glTransformFeedbackVaryings",
    "glGetTransformFeedbackVarying",
    "glDrawArraysInstanced",
    "glDrawElementsInstanced",
    "glDrawArraysInstancedARB",
    "glDrawElementsInstancedARB",
    "glProgramParameteriARB",
    "glFramebufferTextureARB",
    "glFramebufferTextureFaceARB",
    "glBindTransformFeedback",
    "glDeleteTransformFeedbacks",
    "glGenTransformFeedbacks",
    "glIsTransformFeedback",
    "glPauseTransformFeedback",
    "glResumeTransformFeedback",
    "glDrawTransformFeedback",
    "glDrawArraysInstancedEXT",
    "glDrawElementsInstancedEXT",
    "glBeginTransformFeedbackEXT",
    "glEndTransformFeedbackEXT",
    "glBindBufferRangeEXT",
    "glBindBufferOffsetEXT",
    "glBindBufferBaseEXT",
    "glTransformFeedbackVaryingsEXT",
    "glGetTransformFeedbackVaryingEXT",
    "glEGLImageTargetTexture2DOES",
    "glEGLImageTargetRenderbufferStorageOES",
    "glColorMaski",
    "glGetBooleani_v",
    "glGetIntegeri_v",
    "glEnablei",
    "glDisablei",
    "glIsEnabledi",
    "glClampColor",
    "glBeginConditionalRender",
    "glEndConditionalRender",
    "glVertexAttribIPointer",
    "glGetVertexAttribIiv",
    "glGetVertexAttribIuiv",
    "glVertexAttribI1i",
    "glVertexAttribI2i",
    "glVertexAttribI3i",
    "glVertexAttribI4i",
    "glVertexAttribI1ui",
    "glVertexAttribI2ui",
    "glVertexAttribI3ui",
    "glVertexAttribI4ui",
    "glVertexAttribI1iv",
    "glVertexAttribI2iv",
    "glVertexAttribI3iv",
    "glVertexAttribI4iv",
    "glVertexAttribI1uiv",
    "glVertexAttribI2uiv",
    "glVertexAttribI3uiv",
    "glVertexAttribI4uiv",
    "glVertexAttribI4bv",
    "glVertexAttribI4sv",
    "glVertexAttribI4ubv",
    "glVertexAttribI4usv",
    "glGetUniformuiv",
    "glBindFragDataLocation",
    "glGetFragDataLocation",
    "glUniform1ui",
    "glUniform2ui",
    "glUniform3ui",
    "glUniform4ui",
    "glUniform1uiv",
    "glUniform2uiv",
    "glUniform3uiv",
    "glUniform4uiv",
    "glTexParameterIiv",
    "glTexParameterIuiv",
    "glGetTexParameterIiv",
    "glGetTexParameterIuiv",
    "glClearBufferiv",
    "glClearBufferuiv",
    "glClearBufferfv",
    "glClearBufferfi",
    "glGetStringi",
    "glTexBuffer",
    "glPrimitiveRestartIndex",
    "glGetInteger64i_v",
    "glGetBufferParameteri64v",
    "glFramebufferTexture",
    "glVertexAttribDivisor",
    "glPrimitiveRestartNV",
    "glPrimitiveRestartIndexNV",
    "glVertexAttribI1iEXT",
    "glVertexAttribI2iEXT",
    "glVertexAttribI3iEXT",
    "glVertexAttribI4iEXT",
    "glVertexAttribI1uiEXT",
    "glVertexAttribI2uiEXT",
    "glVertexAttribI3uiEXT",
    "glVertexAttribI4uiEXT",
    "glVertexAttribI1ivEXT",
    "glVertexAttribI2ivEXT",
    "glVertexAttribI3ivEXT",
    "glVertexAttribI4ivEXT",
    "glVertexAttribI1uivEXT",
    "glVertexAttribI2uivEXT",
    "glVertexAttribI3uivEXT",
    "glVertexAttribI4uivEXT",
    "glVertexAttribI4bvEXT",
    "glVertexAttribI4svEXT",
    "glVertexAttribI4ubvEXT",
    "glVertexAttribI4usvEXT",
    "glVertexAttribIPointerEXT",
    "glGetVertexAttribIivEXT",
    "glGetVertexAttribIuivEXT",
    "glGetUniformuivEXT",
    "glBindFragDataLocationEXT",
    "glGetFragDataLocationEXT",
    "glUniform1uiEXT",
    "glUniform2uiEXT",
    "glUniform3uiEXT",
    "glUniform4uiEXT",
    "glUniform1uivEXT",
    "glUniform2uivEXT",
    "glUniform3uivEXT",
    "glUniform4uivEXT",
    "glTexParameterIivEXT",
    "glTexParameterIuivEXT",
    "glGetTexParameterIivEXT",
    "glGetTexParameterIuivEXT",
    "glClearColorIiEXT",
    "glClearColorIuiEXT",
    "glUseShaderProgramEXT",
    "glActiveProgramEXT",
    "glCreateShaderProgramEXT",
    "glProgramEnvParameters4fvEXT",
    "glProgramLocalParameters4fvEXT",
    "glBlendEquationSeparateATI",
    "glGetHistogramEXT",
    "glGetHistogramParameterfvEXT",
    "glGetHistogramParameterivEXT",
    "glGetMinmaxEXT",
    "glGetMinmaxParameterfvEXT",
    "glGetMinmaxParameterivEXT",
    "glHistogramEXT",
    "glMinmaxEXT",
    "glResetHistogramEXT",
    "glResetMinmaxEXT",
    "glConvolutionFilter1DEXT",
    "glConvolutionFilter2DEXT",
    "glConvolutionParameterfEXT",
    "glConvolutionParameterfvEXT",
    "glConvolutionParameteriEXT",
    "glConvolutionParameterivEXT",
    "glCopyConvolutionFilter1DEXT",
    "glCopyConvolutionFilter2DEXT",
    "glGetConvolutionFilterEXT",
    "glGetConvolutionParameterfvEXT",
    "glGetConvolutionParameterivEXT",
    "glGetSeparableFilterEXT",
    "glSeparableFilter2DEXT",
    "glColorTableSGI",
    "glColorTableParameterfvSGI",
    "glColorTableParameterivSGI",
    "glCopyColorTableSGI",
    "glGetColorTableSGI",
    "glGetColorTableParameterfvSGI",
    "glGetColorTableParameterivSGI",
    "glPixelTexGenSGIX",
    "glPixelTexGenParameteriSGIS",
    "glPixelTexGenParameterivSGIS",
    "glPixelTexGenParameterfSGIS",
    "glPixelTexGenParameterfvSGIS",
    "glGetPixelTexGenParameterivSGIS",
    "glGetPixelTexGenParameterfvSGIS",
    "glSampleMaskSGIS",
    "glSamplePatternSGIS",
    "glPointParameterfSGIS",
    "glPointParameterfvSGIS",
    "glColorSubTableEXT",
    "glCopyColorSubTableEXT",
    "glBlendFuncSeparateINGR",
    "glMultiModeDrawArraysIBM",
    "glMultiModeDrawElementsIBM",
    "glSampleMaskEXT",
    "glSamplePatternEXT",
    "glDeleteFencesNV",
    "glGenFencesNV",
    "glIsFenceNV",
    "glTestFenceNV",
    "glGetFenceivNV",
    "glFinishFenceNV",
    "glSetFenceNV",
    "glActiveStencilFaceEXT",
    "glBindVertexArrayAPPLE",
    "glDeleteVertexArraysAPPLE",
    "glGenVertexArraysAPPLE",
    "glIsVertexArrayAPPLE",
    "glStencilOpSeparateATI",
    "glStencilFuncSeparateATI",
    "glDepthBoundsEXT",
    "glBlendEquationSeparateEXT",
    "glBlitFramebufferEXT",
    "glGetQueryObjecti64vEXT",
    "glGetQueryObjectui64vEXT",
    "glBufferParameteriAPPLE",
    "glFlushMappedBufferRangeAPPLE",
    "glTextureRangeAPPLE",
    "glGetTexParameterPointervAPPLE",
    "glClampColorARB",
    "glFramebufferTextureLayerARB",
    "glVertexAttribDivisorARB",
    "glTexBufferARB",
    "glDrawElementsInstancedBaseVertex",
    "glBlendEquationiARB",
    "glBlendEquationSeparateiARB",
    "glBlendFunciARB",
    "glBlendFuncSeparateiARB",
    "glGenSamplers",
    "glDeleteSamplers",
    "glIsSampler",
    "glBindSampler",
    "glSamplerParameteri",
    "glSamplerParameteriv",
    "glSamplerParameterf",
    "glSamplerParameterfv",
    "glSamplerParameterIiv",
    "glSamplerParameterIuiv",
    "glGetSamplerParameteriv",
    "glGetSamplerParameterIiv",
    "glGetSamplerParameterfv",
    "glGetSamplerParameterIuiv",
    "glReleaseShaderCompiler",
    "glShaderBinary",
    "glGetShaderPrecisionFormat",
    "glDepthRangef",
    "glClearDepthf",
    "glGetGraphicsResetStatusARB",
    "glGetnMapdvARB",
    "glGetnMapfvARB",
    "glGetnMapivARB",
    "glGetnPixelMapfvARB",
    "glGetnPixelMapuivARB",
    "glGetnPixelMapusvARB",
    "glGetnPolygonStippleARB",
    "glGetnColorTableARB",
    "glGetnConvolutionFilterARB",
    "glGetnSeparableFilterARB",
    "glGetnHistogramARB",
    "glGetnMinmaxARB",
    "glGetnTexImageARB",
    "glReadnPixelsARB",
    "glGetnCompressedTexImageARB",
    "glGetnUniformfvARB",
    "glGetnUniformivARB",
    "glGetnUniformuivARB",
    "glGetnUniformdvARB",
    "glBlendFuncIndexedAMD",
    "glBlendFuncSeparateIndexedAMD",
    "glBlendEquationIndexedAMD",
    "glBlendEquationSeparateIndexedAMD",
    "glTextureBarrierNV",
    NULL
};

