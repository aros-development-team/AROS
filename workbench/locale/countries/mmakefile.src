# $Id$
CURDIR=workbench/countries

include $(TOP)/config/make.cfg

OBJDIR=$(GENDIR)/workbench/locale/countries
LOCALEDIR=$(BINDIR)/Locale
COUNTRYDIR=$(LOCALEDIR)/Countries
DEPLIBS=$(LIBDIR)/libamiga.a $(LIBDIR)/libarosc.a $(LIBDIR)/libarosm.a
LIBS=-L$(LIBDIR) -lamiga -larosc -larosm
MAKECOUNTRY=$(OBJDIR)/makecountry

COUNTRIES := australia belgie belgique canada canada_français \
    	     danmark deutschland españa france great_britain \
	     italia nederland norge österreich polska portugal \
	     schweiz suisse sverige svizzera united_kingdom \
	     united_states

COUNTIFF=$(foreach f, $(COUNTRIES), $(COUNTRYDIR)/$(f).country)

#MM workbench-locale : setup includes
workbench-locale: $(MAKECOUNTRY) $(COUNTIFF)
	@$(NOP)

#MM workbench-locale-quick :
workbench-locale-quick : $(MAKECOUNTRY) $(COUNTIFF)
	@$(NOP)

#MM
setup :
	%mkdirs_q $(OBJDIR) $(LOCALEDIR) $(COUNTRYDIR)

#MM
clean ::
	$(RM)   $(OBJDIR) *.err

$(COUNTIFF) : $(foreach f, $(COUNTRIES), $(OBJDIR)/$(f).o)
	@echo Making $(notdir $@)...
	@$(MAKECOUNTRY) $(COUNTRYDIR)/ $(foreach f, $@, $(notdir $(basename $(f))))

$(MAKECOUNTRY) : $(OBJDIR)/makecountry.o $(foreach f, $(COUNTRIES),$(OBJDIR)/$(f).o)
	$(CC) $(CFLAGS) $^ -o $@

$(OBJDIR)/%.o : %.c
	%compile_q

$(OBJDIR)/%.d : %.c
	%mkdepend_q

%common
%include_deps $(foreach f,makecountry $(COUNTRIES),$(OBJDIR)/$(f).d)
