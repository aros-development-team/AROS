#   $Id$
#
#   Makefile for the C: Programs

include $(TOP)/config/make.cfg

FILES	:= \
	AddBuffers \
	AddDatatypes \
	Avail \
	Beep \
	Break \
	ChangeTaskPri \
	CheckMem \
	ConClip \
	Copy \
	CRList \
	DamageList \
	Date \
	Delete \
	DevList \
	Dir \
	Filenote \
	Info \
	Install \
	install-i386-pc \
	Join \
	LeakWatch \
	LibList \
	List \
	Lock \
	MakeDir \
	MakeLink \
	Mount \
	Protect \
	Reboot \
	Relabel \
	Rename \
	RequestChoice \
	RequestFile \
	ResList \
	ScreenPattern \
	Search \
	SetClock \
	SetDate \
	SetDefaultFont \
	SetKeyboard \
	SetLocale \
	Sort \
	StackSnoop \
	TaskList \
	Touch \
	Type \
	Version \
	Wait \
	Which


# I'd like to move this into a rule, but it would be far too hard.
EXES := $(foreach f,$(FILES), $(AROS_C)/$(f))

USER_CFLAGS := -I$(TOP)/rom/dos -O2 -fomit-frame-pointer

USE_CLIB_SHARED := yes
USE_AMIGALIB := yes
USE_MLIB := yes
USE_AROSLIB := yes

#MM- workbench : workbench-c
#MM workbench-c : includes linklibs

%make_prog_setup mmake=workbench-c

workbench-c : setup $(EXES)

%make_prog_single dir=$(AROS_C)

$(OBJDIR)/evalParser.tab.c : evalParser.y
	$(BISON) -o $@ $<

$(OBJDIR)/Eval.o : $(OBJDIR)/evalParser.tab.c Eval.c
	%compile_q from=Eval.c opt="$(CFLAGS) -I$(OBJDIR)"

%common
%include_deps
