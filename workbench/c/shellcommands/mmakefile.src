#   $Id$
#
#   Makefile for shell commands

include $(TOP)/config/make.cfg

FILES	:= \
    Alias \
    Ask \
    CD \
    Echo \
    Else \
    EndCLI \
    EndIf \
    EndSkip \
    EndShell \
    Execute \
    FailAt \
    Fault \
    Get \
    Getenv \
    If \
    Lab \
    NewCLI \
    NewShell \
    Path \
    Prompt \
    Quit \
    Resident \
    Run \
    Set \
    Setenv \
    Shell \
    Skip \
    Stack \
    Status \
    Unalias \
    Unset \
    Unsetenv \
    Why

USER_CFLAGS := -I$(SRCDIR)/rom/dos \
	       -I$(GENDIR)/workbench/c/shellcommands/shellsegs.h

#MM- workbench-c : workbench-c-shellcommands
#MM- workbench-c-quick : workbench-c-shellcommands-quick
#MM- workbench-c-shellcommands : includes linklibs workbench-libs-dos-catalogs

%build_progs mmake=workbench-c-shellcommands \
    files=$(FILES) targetdir=$(AROS_C) \
    uselibs="arossupport amiga rom m" \
    usestartup=no

$(OBJDIR)/NewCLI.o : $(OBJDIR)/NewShell.o
	@$(ECHO) Copying $< to $@
	@$(CP) $< $@


# Embedded side of the world


USER_CFLAGS := -I$(SRCDIR)/rom/dos \
	       -include $(SRCDIR)/workbench/c/shellcommands/shcommands_embedded.h \
	       -D__NOLIBBASE__ \
	       $(PARANOIA_CFLAGS)

OBJDIR := $(OBJDIR).kernel

FILES := Shell

%build_module mmake=kernel-c-shellcommands \
  modname=shellcommands modtype=resource \
  files="shellcommands_init $(FILES)" \
  uselibs="rom"

$(OBJDIR)/NewCLI.o : $(OBJDIR)/NewShell.o
	@$(ECHO) Copying $< to $@
	@$(CP) $< $@

%common
