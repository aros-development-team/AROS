#   Copyright © 1995-2001, The AROS Development Team. All rights reserved.
#   $Id$
#
#   Desc: Static makefile rule file for AROS
#
include $(TOP)/config/host.cfg

# This is the current AROS version.
VERSION	:= 1.12

# These are the paths to various directories.
# All files corresponding to a specific target go here.
TARGETDIR   :=	$(TOP)/bin/$(TARGET_ARCH)-$(TARGET_CPU)

# The HTML pages go to here
HTMLDIR	    :=	$(HOME)/www/www.aros.org/www

# This is the directory structure for an AROS system.
AROSDIR	    := $(TARGETDIR)/AROS

# These are the subdirectories under that path.
AROS_C		:= $(AROSDIR)/C
AROS_CLASSES	:= $(AROSDIR)/Classes
AROS_DATATYPES  := $(AROS_CLASSES)/DataTypes
AROS_DEVS	:= $(AROSDIR)/Devs
AROS_FS		:= $(AROSDIR)/Devs
AROS_GADGETS	:= $(AROS_CLASSES)/Gadgets
AROS_HIDDS	:= $(AROSDIR)/Hidds
AROS_LIB	:= $(AROSDIR)/lib
AROS_LIBS	:= $(AROSDIR)/Libs
AROS_LOCALE	:= $(AROSDIR)/Locale
AROS_MODULES	:= $(AROSDIR)/os
AROS_S		:= $(AROSDIR)/S
AROS_INCLUDES	:= $(AROSDIR)/Include

INCDIR		:= $(AROSDIR)/Include
TESTDIR		:= $(AROSDIR)/test
SCRIPTDIR	:= $(AROSDIR)/scripts
CONTRIBDIR	:= $(AROSDIR)/contrib

# The generated files all go under the GENDIR path
GENDIR		:= $(TARGETDIR)/gen

# The paths to the generated tools
TOOLDIR		:= $(TOP)/bin/$(HOST_ARCH)-$(HOST_CPU)/tools
TOOLLIB		:= $(TOOLDIR)/libtool.a
MMAKE		:= $(TOOLDIR)/mmake$(HOST_EXE_SUFFIX)
ARCHTOOL	:= $(TOOLDIR)/archtool$(HOST_EXE_SUFFIX)
CPAK		:= $(TOOLDIR)/cpak$(HOST_EXE_SUFFIX)
GENMF		:= $(TOOLDIR)/genmf$(HOST_EXE_SUFFIX)
FLEXCAT		:= $(TOOLDIR)/FlexCat$(HOST_EXE_SUFFIX)
MODTOOL		:= $(TOOLDIR)/modtool$(HOST_EXE_SUFFIX)
SRC2HTML	:= $(TOOLDIR)/src2html
CREATEDTDESC	:= $(TOOLDIR)/createdtdesc$(HOST_EXE_SUFFIX)
ADFLIB		:= $(TOOLDIR)/libadf.a
ADFINC		:= $(TOP)/tools/adflib
CREATEHDFILE	:= $(TOOLDIR)/createhdfile$(HOST_EXE_SUFFIX)
MKFSAFFS	:= $(TOOLDIR)/mkfsaffs$(HOST_EXE_SUFFIX)
ILBMTOC		:= $(TOOLDIR)/ilbmtoc$(HOST_EXE_SUFFIX)
GENSKELETON	:= $(TOP)/tools/genskeleton/genskeleton$(HOST_EXE_SUFFIX)
GENSETS         := $(TOOLDIR)/gensets$(HOST_EXE_SUFFIX)
COLLECT-AROS    := $(TOOLDIR)/collect-aros$(HOST_EXE_SUFFIX)
SPECS           := $(TOOLDIR)/specs

# At the moment we have two copies of the includes...
# This is the AROS includes, minus clib/mlib.
GENINCDIR	:= $(GENDIR)/include

# Include paths - these are really tricky. Note that $(INCLUDES) will not
# be expanded until right when it is used. That way modules can change the
# $(OS_INCLUDES) and $(USER_INCLUDES) whenever they like.
INCLUDES    =	$(USER_INCLUDES) $(OS_INCLUDES)
OS_INCLUDES :=	-I$(AROSDIR)/Include

# Basic make configuration. No need to edit anything else under here.

.SUFFIXES :
.SUFFIXES : .c .h .d .s .S

.PHONY : all clean setup subdirs

-include $(TOP)/make.defaults
-include $(TOP)/make.opts

# Was debugging enabled? Better set up the options.
ifeq ($(DEBUG),yes)
HOST_CFLAGS += $(DEBUG_CFLAGS)
HOST_LDFLAGS += $(DEBUG_LDFLAGS)
TARGET_CFLAGS += $(DEBUG_CFLAGS)
TARGET_LDFLAGS += $(DEBUG_LDFLAGS)
SYSTEM_CFLAGS += $(DEBUG_CFLAGS)
SYSTEM_AFLAGS += $(DEBUG_CFLAGS)
SYSTEM_LDFLAGS += $(DEBUG_LDFLAGS)
MECHO	:= $(ECHO)
else
MECHO	:= $(NOP)
endif

# C and assembly flags are set depending upon the directory
# XXX Urk! This has to be fixed, there should be 4 parts to this if that.
CFLAGS	    = $(USER_CFLAGS) $(SPECIAL_CFLAGS) $(OS_CFLAGS) $(INCLUDES) $(TARGET_CFLAGS) -D__AROS__ -D__AROS

# Compatibility with old variables

APPCFLAGS   = $(USER_DEFINES) $(APP_CFLAGS) $(SPECIAL_CFLAGS) $(INCLUDES)
AFLAGS	    = $(SYSTEM_AFLAGS) $(SPECIAL_AFLAGS) $(TARGET_AFLAGS)


OBJDIR      	:=	$(GENDIR)/$(CURDIR)
BINDIR	    	:=	$(AROSDIR)
EXEDIR	    	:=	$(AROSDIR)/C
SDIR	    	:=	$(AROSDIR)/S
LIBDIR	    	:=	$(AROSDIR)/lib
DEVSDIR	    	:=	$(AROSDIR)/Devs
HIDDSDIR    	:=	$(AROSDIR)/Hidds
GADGETDIR   	:=	$(AROSDIR)/Classes/Gadgets
DATATYPESDIR	:=	$(AROSDIR)/Classes/DataTypes
SLIBDIR	    	:=	$(AROSDIR)/Libs
OSMODDIR    	:=	$(AROSDIR)/os
OSGENDIR    	:=	$(GENDIR)/rom
