##begin config
basename        ata
version		41.24
libbasetype     struct ataBase
residentpri     4
beginio_func    BeginIO
abortio_func    AbortIO
options         noexpunge
oopbase_field   ata_OOPBase
##end config

##begin cdefprivate
#include <hidd/ata.h>
#include "ata.h"
#include "bus_class.h"
##end cdefprivate

##begin cdef
#include <exec/devices.h>
#include <exec/io.h>
##end cdef

##begin functionlist
ULONG GetRdskLba(struct IORequest *io) (A1)
ULONG GetBlkSize(struct IORequest *io) (A1)
##end functionlist

##begin interface
##begin config
interfaceid   hidd.ata.bus
interfacename Hidd_ATABus
methodstub    HIDD_ATABus
methodbase    HiddATABusBase
attributebase HiddATABusAB
##end config

##begin attributelist
BOOL  Use80Wire #    [..G] Tells if this bus uses 80-conductor cable
BOOL  Use32Bit #     [.SG] Controls 32-bit mode
BOOL  UseDMA #       [..G] Tells if this bus is DMA-capable
ULONG PIODataSize #  [I..] Size of PIO interface data structure
ULONG DMADataSize #  [I..] Size of DMA interface data structure
APTR *PIOVectors #   [I..] PIO interface function table
APTR *PIO32Vectors # [I..] 32-bit PIO interface function table
APTR *DMAVectors #   [I..] DMA interface function table
APTR  IRQHandler #   [I..] Pointer to IRQ handler function
APTR  IRQData #      [I..] Caller-supplied data to pass to IRQ handler
##end attributelist

##begin methodlist
APTR GetPIOInterface()
APTR GetDMAInterface()
BOOL SetXferMode(UBYTE unit, ata_XferMode mode)
##end methodlist
##end interface

##begin class
##begin config
basename ATA
type hidd
classid CLID_HW_ATA
superclass CLID_HW
classptr_field ataClass
##end config

##begin methodlist
.interface Root
New
Dispose
.interface HW
AddDriver
##end methodlist
##end class

##begin class
##begin config
basename ATABus
type hidd
classid CLID_Hidd_ATABus
classdatatype struct ATA_BusData
superclass CLID_Hidd
classptr_field busClass
##end config

##begin methodlist
.interface Root
New
Dispose
Get
Set
.interface Hidd_ATABus
GetPIOInterface
GetDMAInterface
SetXferMode
##end methodlist
##end class
